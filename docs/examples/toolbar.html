---
---
<!doctype html>
<html>
<head>
    <link rel="stylesheet" href="toolbar.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/luxon@1.21.3"></script>
</head>
<body>
    <div class="toolbar">
        <div class="btn-group">
            <button onclick="toggleSidebar()">
                <i class="fas fa-fw fa-bars"></i>
            </button>
        </div>
        <div class="btn-group">
            <button onclick="pageLeft()">
                <i class="fas fa-fw fa-angle-double-left"></i>
            </button>
            <button onmousedown="toggleMove(-50)"
                    onmouseup="untoggleMove()"
                    onmouseleave="untoggleMove()">
                <i class="fas fa-fw fa-angle-left"></i>
            </button>
            <button onmousedown="toggleMove(50)"
                    onmouseup="untoggleMove()"
                    onmouseleave="untoggleMove()">
                <i class="fas fa-fw fa-angle-right"></i>
            </button>
            <button onclick="pageRight()">
                <i class="fas fa-fw fa-angle-double-right"></i>
            </button>
        </div>
        <div class="btn-group">
            <button onclick="jumpToToday()">
                <i class="far fa-fw fa-calendar"></i>
                Today
            </button>
            <button onclick="jumpToNow()">
                <i class="fas fa-fw fa-crosshairs"></i>
            </button>
        </div>
        <div class="btn-group">
            <button onclick="zoomIn()">
                <i class="fas fa-fw fa-plus"></i>
            </button>
            <button onclick="zoomOut()">
                <i class="fas fa-fw fa-minus"></i>
            </button>
        </div>
        <div class="btn-group">
            <button id="hand" onclick="changeTool('hand')">
                <i class="fas fa-fw fa-hand-paper"></i>
            </button>
            <button id="range-select" onclick="changeTool('range-select')">
                <i class="fas fa-fw fa-arrows-alt-h"></i>
            </button>
        </div>
    </div>
    <div id="timeline" style="height: 500px"></div>

    <script type="module">
        import { AbsoluteTimeAxis, EventLine, MouseTracker, Timeline, TimeLocator } from '{{- site.dist -}}';

        function getRandomInt(min, max) {
            min = Math.ceil(min);
            max = Math.floor(max);
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        window.addEventListener('load', () => {
            const targetEl = document.getElementById('timeline');
            const timeline = new Timeline(targetEl);

            const axis = new AbsoluteTimeAxis(timeline);
            axis.frozen = true;

            const locator = new TimeLocator(timeline, () => new Date().getTime());
            locator.knobColor = 'salmon';
            locator.lineColor = 'salmon';

            const tracker = new MouseTracker(timeline);

            const start = luxon.DateTime.local().startOf('day');
            const stop = luxon.DateTime.local().endOf('day');
            timeline.setBounds(start.toMillis(), stop.toMillis());


            for (let i = 0; i < 10; i++) {
                const line = new EventLine(timeline);

                const randomEvents = [];
                const dataStart = start.minus({ days: 5 }).toMillis();
                const dataStop = start.plus({ days: 5 }).toMillis();
                for (let j = 0; j < 50; j++) {
                    const eventStart = getRandomInt(dataStart, dataStop);
                    const eventDuration = getRandomInt(2000000, 8000000);
                    randomEvents.push({
                        start: eventStart,
                        stop: eventStart + eventDuration,
                        label: `${i + 1}.${j + 1}`,
                    });
                }
                line.events = randomEvents;
                line.label = 'Line ' + (i + 1);
            }

            document.getElementById('hand').className = 'active';

            let moveInterval;

            window.toggleMove = (x) => {
                timeline.panBy(x);
                clearInterval(moveInterval);
                moveInterval = setInterval(() => timeline.panBy(x), 50);
            };

            window.untoggleMove = () => {
                clearInterval(moveInterval);
                moveInterval = undefined;
            };

            window.pageLeft = () => {
                const x = timeline.distanceBetween(timeline.start, timeline.stop);
                timeline.panBy(-x);
            };

            window.pageRight = () => {
                const x = timeline.distanceBetween(timeline.start, timeline.stop);
                timeline.panBy(x);
            };

            window.zoomIn = () => timeline.zoomIn();
            window.zoomOut = () => timeline.zoomOut();

            window.jumpToToday = () => {
                const dt = new Date();
                dt.setHours(0, 0, 0, 0);
                const start = dt.getTime();
                dt.setDate(dt.getDate() + 1);
                const stop = dt.getTime();
                timeline.setBounds(start, stop);
            };

            window.jumpToNow = () => timeline.panTo(new Date().getTime());

            window.toggleSidebar = () => timeline.sidebar.toggle();

            window.changeTool = tool => {
                timeline.setActiveTool(tool);
                for (const id of ['hand', 'range-select']) {
                    document.getElementById(id).className = (tool === id ? 'active' : '');
                }
            };
        });
    </script>
</body>
</html>
